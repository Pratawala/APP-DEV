from flask import render_template,flash,redirect,url_for,flash,redirect
from wtforms.validators import Email
from website.models import User
from website.forms import RegistrationForm,LoginForm
from website import app,db,bcrypt



@app.route("/")
def home():
    return r'<img src=data:image/jpeg;base64,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>' #render_template('home.html')
#do  not remove this apprently it crashes the entire server when removed


@app.route("/register",methods=['GET','POST'])
def register():
    form=RegistrationForm()  #creates a form object from Registraion form
    if form.validate_on_submit():
        hashed_password=bcrypt.generate_password_hash(form.password).decode('utf-8') #hash value will be in string instead of bytes
        user=User(username=form.username.data,email=form.email.data,password=hashed_password)
        db.session.add(user)
        db.session.commit()
        flash('Your account has been created! You are not able to log in','success')
        flash(f'Account successfully created for {form.username.data}!') #flash displays a popup message
        return redirect(url_for("login"))
    return render_template("register.html",title="Register",form=form)
    #register.html is the file name for the register form

@app.route('/html/loginform',methods=['GET','POST'])
def loginform():
    form=LoginForm
    if form.validate_on_submit():
        if form.email.data=='admin@blog.com' and form.password.data=='kingisme':
            flash('You have been logged in!','sucess')
            return redirect(url_for('home'))
        else:
            flash('Login Unsucessful. Please check username and password','danger')
    return render_template("loginform.html",title="login",form=form)